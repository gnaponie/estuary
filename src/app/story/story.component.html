<app-spinner [loading]="loading"></app-spinner>
<app-navbar></app-navbar>

<div class="container-fluid">
  <div class="diagram" id="js-diagram">
    <ng-container *ngIf="story">
      <app-storyrow [node]="node" [backwardSiblings]="story.meta.story_related_nodes_backward[i]"
          [forwardSiblings]="story.meta.story_related_nodes_forward[i]" [first]="first" [last]="last"
          [active]="node === selectedNode" [totalLeadTime]="story.meta.total_lead_time"
          [totalProcessingTime]="story.meta.total_processing_time" [totalWaitTime]="story.meta.total_wait_time"
          *ngFor="let node of story.data; let i = index; let last = last; let first = first">
      </app-storyrow>
    </ng-container>
  </div>
</div>

<app-storysidebar [node]="selectedNode"></app-storysidebar>
